// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client-js"
  // output   = "../src/generated/prisma"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

model User {
  id        String     @id @default(uuid())
  name      String
  email     String     @unique
  createdAt DateTime   @default(now())
  updatedAt DateTime   @default(now()) @updatedAt
  Business  Business[]
  Post      Post[]
}

model Business {
  id                 String    @id @default(uuid())
  userId             String
  name               String?
  email              String?
  description        String?
  size               String?
  longitude          Float?
  latitude           Float?
  redditAccessToken  String?
  redditRefreshToken String?
  redditExpiresIn    DateTime?
  logo               String?
  mainTopicId        String?
  toneOfVoiceId      String?
  mainGoalId         String?
  targetAudienceId   String?
  createdAt          DateTime  @default(now())
  updatedAt          DateTime  @default(now()) @updatedAt

  author         User            @relation(fields: [userId], references: [id])
  mainGoal       MainGoal?       @relation(fields: [mainGoalId], references: [id])
  mainTopic      MainTopic?      @relation(fields: [mainTopicId], references: [id])
  toneOfVoice    ToneOfVoice?    @relation(fields: [toneOfVoiceId], references: [id])
  targetAudience TargetAudience? @relation(fields: [targetAudienceId], references: [id])
  Post           Post[]
}

model MainTopic {
  id          String     @id @default(uuid())
  title       String
  description String
  logo        String
  Business    Business[]
}

model ToneOfVoice {
  id       String     @id @default(uuid())
  title    String
  logo     String
  Business Business[]
}

model MainGoal {
  id       String     @id @default(uuid())
  title    String
  Business Business[]
}

model TargetAudience {
  id       String     @id @default(uuid())
  title    String
  Business Business[]
}

model Post {
  id          String   @id @default(uuid())
  title       String?
  description String
  userId      String
  businessId  String
  isPosted    Boolean  @default(true)
  hashtags    String[] @default([])
  createdAt   DateTime @default(now())
  scheduledAt DateTime @default(now())
  updatedAt   DateTime @default(now()) @updatedAt
  author      User     @relation(fields: [userId], references: [id])
  business    Business @relation(fields: [businessId], references: [id])
}
